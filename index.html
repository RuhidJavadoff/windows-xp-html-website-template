<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ruhid Javadoff - XP İş Masası</title>
    <link rel="icon" type="image/png" href="https://ruhidjavadoff.site/sekiller/logorjxp.png">
    <style>
        body {
            background-image: url('https://ruhidjavadoff.site/sekiller/backgroundxp.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            margin: 0;
            font-family: "Tahoma", "Geneva", sans-serif;
            overflow: hidden; 
            display: flex;
            flex-direction: column;
            height: 100vh; 
            color: white; 
            user-select: none; 
        }

        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000000; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 2000; transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }
        #loading-screen.hidden { opacity: 0; visibility: hidden; pointer-events: none;}
        .xp-logo-boot { width: 200px; margin-bottom: 20px; }
        .loading-bar-container { width: 200px; height: 12px; border: 1px solid #7f7f7f; background-color: #3a3a3a; padding: 1px; box-sizing: border-box; }
        .loading-bar { width: 100%; height: 100%; display: flex; }
        .loading-bar-segment { height: 100%; background-color: #00A600; margin-right: 1px; flex-grow: 1; opacity: 0; animation: loadingSegment 1.5s infinite; }
        .loading-bar-segment:nth-child(1) { animation-delay: 0s; } .loading-bar-segment:nth-child(2) { animation-delay: 0.15s; }
        .loading-bar-segment:nth-child(3) { animation-delay: 0.3s; } .loading-bar-segment:nth-child(4) { animation-delay: 0.45s; }
        .loading-bar-segment:nth-child(5) { animation-delay: 0.6s; } .loading-bar-segment:nth-child(6) { animation-delay: 0.75s; }
        @keyframes loadingSegment { 0% { opacity: 0; transform: translateX(-20px); } 20% { opacity: 1; transform: translateX(0); } 80% { opacity: 1; transform: translateX(0); } 100% { opacity: 0; transform: translateX(20px); } }

        #desktop {
            flex-grow: 1; padding: 0; position: relative; overflow: hidden; 
        }
        #desktop-icons-wrapper {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            transform-origin: top left; padding: 20px; 
            box-sizing: border-box; overflow: auto; 
        }
        
        .desktop-item-container {
            position: relative; width: 100%; min-height: 100%; 
        }
        
        .desktop-icon {
            display: flex; flex-direction: column; align-items: center;
            width: 100px; 
            min-height: 90px; 
            text-align: center; text-decoration: none; color: white;
            padding: 6px; border-radius: 3px; cursor: grab;
            transition: background-color 0.1s; position: absolute; 
            box-sizing: border-box;
        }
        .desktop-icon.dragging { opacity: 0.7; z-index: 1000; cursor: grabbing; }
        .desktop-icon.selected, .desktop-icon:focus {
            background-color: rgba(50, 100, 200, 0.5); 
            outline: 1px dotted rgba(0, 0, 0, 0.5); 
        }
        .desktop-icon.selected span, .desktop-icon:focus span {
             background-color: rgba(50, 100, 200, 0.7); 
        }
        .desktop-icon:hover:not(.selected) {
             background-color: rgba(50, 100, 200, 0.2);
        }
        .desktop-icon img {
            width: 48px; height: 48px; margin-bottom: 8px; pointer-events: none; 
        }
        .desktop-icon span {
            font-size: 13px; text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.8);
            padding: 2px 3px; word-wrap: break-word; max-width: 100%; 
            line-height: 1.3; pointer-events: none; 
        }
        
        .xp-context-menu {
            position: absolute; background-color: #f0f0f0; border: 1px solid #808080; 
            box-shadow: 2px 2px 3px rgba(0,0,0,0.2); padding: 2px;
            font-size: 12px; color: black; z-index: 1500; min-width: 200px; 
            display: none; 
        }
        .xp-context-menu.xp-submenu { border-left: 1px solid #808080; }
        .context-menu-item {
            padding: 5px 20px 5px 30px; cursor: default; position: relative; white-space: nowrap;
        }
        .context-menu-item:hover { background-color: #316ac5; color: white; }
        .context-menu-item.has-submenu::after { 
            content: '►'; position: absolute; right: 7px; top: 50%;
            transform: translateY(-50%); font-size: 10px;
        }
         .context-menu-item.checked::before { 
            content: '✓'; position: absolute; left: 8px; top: 50%;
            transform: translateY(-50%); font-weight: bold; color: #000; 
        }
        .context-menu-item:hover.checked::before { color: white; }
        .context-menu-separator { height: 1px; background-color: #c0c0c0; margin: 3px 1px; }

        .taskbar {
            background: linear-gradient(to bottom, #245DD7 0%, #245DD7 4%, #1D78F5 6%, #0058DA 12%, #0058DA 88%, #004BAF 94%, #003C9C 100%);
            color: white; padding: 2px 3px; display: flex; align-items: center;
            height: 30px; border-top: 1px solid #6791E0; flex-shrink: 0; position: relative; z-index: 1000; 
        }
        .start-button {
            background: linear-gradient(to bottom, #7BC46E, #5DD748 15%, #3AA02A 85%, #318B22);
            color: white; border: 1px solid transparent; border-radius: 0 8px 8px 0 / 0 50% 50% 0; 
            padding: 0px 10px 0px 5px; font-weight: bold; font-style: italic; font-size: 15px; 
            cursor: pointer; display: flex; align-items: center; margin-right: 6px; height: 25px;
            box-shadow: 1px 1px 1px rgba(0,0,0,0.3), inset 1px 1px 0px rgba(255,255,255,0.3);
            text-shadow: 1px 1px 1px #236217; position: relative;
        }
         .start-button::before {
            content: ''; position: absolute; top: 1px; left: 1px; right: 1px; bottom: 1px;
            border-radius: inherit; border: 1px solid rgba(255,255,255,0.6);
            border-bottom-color: rgba(0,0,0,0.2); border-right-color: rgba(0,0,0,0.2);
        }
        .start-button img { width: 22px; height: 22px; margin-right: 4px; object-fit: contain; }
        .start-button.active, .start-button:active { 
            background: linear-gradient(to top, #7BC46E, #5DD748 15%, #3AA02A 85%, #318B22);
            box-shadow: inset 1px 1px 2px rgba(0,0,0,0.5);
        }
        .taskbar-divider { height: 22px; width: 2px; background: linear-gradient(to right, rgba(0,0,0,0), rgba(0,0,0,0.1) 20%, rgba(0,0,0,0.1) 80%, rgba(0,0,0,0)); border-left: 1px solid rgba(0,0,0,0.1); border-right: 1px solid rgba(255,255,255,0.2); margin: 0 3px;}
        .taskbar-clock { margin-left: auto; background-color: #1766D1; border: 1px solid #0C3D83; border-top-color: #073371; border-left-color: #073371; padding: 1px 6px; font-size: 11px; border-radius: 2px; box-shadow: inset 1px 1px 1px rgba(0,0,0,0.2); height: 21px; display: flex; align-items: center;}
        
        #system-tray-icons {
            display: flex; align-items: center; margin-left: 5px; 
        }
        #system-tray-icons img {
            width: 16px; height: 16px; margin-left: 3px; opacity: 0.8;
        }

        #start-menu {
            position: absolute; bottom: 30px; left: 0;
            width: 380px; height: auto; max-height: 480px; 
            background: linear-gradient(to bottom, #1D68D7, #0058DA 10%, #0058DA 90%, #00409C);
            border: 1px solid #003C9C; border-top-right-radius: 8px;
            box-shadow: 3px -3px 5px rgba(0,0,0,0.3);
            display: none; z-index: 1900; color: white;
            font-size: 12px; padding: 2px; flex-direction: column;
        }
        #start-menu.visible { display: flex; }

        .start-menu-header {
            background-color: #074DB8; padding: 8px 10px; display: flex;
            align-items: center; border-bottom: 1px solid #003C9C;
        }
        .start-menu-header .user-avatar {
            width: 40px; height: 40px; border-radius: 3px;
            border: 1px solid #003C9C; margin-right: 10px; background-color: #ccc; 
        }
        .start-menu-header .user-name { font-weight: bold; font-size: 14px; }
        .start-menu-body { display: flex; flex-grow: 1; overflow: hidden; }
        .start-menu-left-panel, .start-menu-right-panel {
            padding: 5px; color: black; overflow-y: auto; 
        }
        .start-menu-left-panel { width: 60%; background-color: #D6E8FF; }
        .start-menu-right-panel { width: 40%; background-color: #C0DCFF; border-left: 1px solid #A5C7FF; }
        .start-menu-item {
            display: flex; align-items: center; padding: 6px 8px;
            cursor: default; text-decoration: none; color: black;
        }
        .start-menu-item:hover { background-color: #316ac5; color: white; }
        .start-menu-item img { width: 20px; height: 20px; margin-right: 8px; object-fit: contain; }
        .start-menu-item.all-programs { font-weight: bold; justify-content: center; }
        .start-menu-item .submenu-arrow { margin-left: auto; font-size: 10px; }
        .start-menu-separator { height: 1px; background-color: #A5C7FF; margin: 5px 0; }
        .start-menu-right-panel .start-menu-separator { background-color: #8EBAFF; }
        .start-menu-footer {
            background-color: #074DB8; padding: 5px; display: flex;
            justify-content: flex-end; align-items: center; border-top: 1px solid #003C9C;
        }
        .start-menu-footer button {
            background: none; border: none; color: white; cursor: pointer;
            display: flex; align-items: center; padding: 5px 10px; font-size: 11px;
        }
        .start-menu-footer button:hover { opacity: 0.8; }
        .start-menu-footer button img { width: 16px; height: 16px; margin-right: 5px; }

        #xp-notification {
            position: fixed; bottom: 35px; right: 5px; width: 220px;
            background-color: #FFFFE1; border: 1px solid #000000;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2); z-index: 2100; 
            padding: 0; font-size: 11px; color: black;
            display: none; opacity: 0;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            transform: translateY(20px); 
        }
        #xp-notification.visible { display: block; opacity: 1; transform: translateY(0); }
        .notification-title-bar {
            background-color: #FCD44F; padding: 3px 5px; font-weight: bold;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #000;
        }
        .notification-title-bar .close-notification {
            background-color: #FF7670; border: 1px solid #7F7F7F; color: white;
            font-family: "Marlett", "Webdings"; width: 15px; height: 15px; 
            line-height: 13px; font-size: 10px; cursor: pointer;
        }
        .notification-content { padding: 8px 10px; display: flex; align-items: flex-start; }
        .notification-content img { width: 16px; height: 16px; margin-right: 8px; }
        .notification-balloon-tail { 
            position: absolute; bottom: -10px; right: 20px; width: 0; height: 0;
            border-left: 10px solid transparent; border-right: 10px solid transparent;
            border-top: 10px solid #FFFFE1; filter: drop-shadow(1px 1px 1px rgba(0,0,0,0.1));
        }

        @media (max-width: 768px) { 
            #desktop-icons-wrapper { padding: 15px; }
            .desktop-icon { width: 85px; min-height: 80px; } 
            .desktop-icon img { width: 40px; height: 40px; }
            .desktop-icon span { font-size: 11px; }
            .start-button { padding: 0px 8px 0px 4px; font-size: 14px; height: 24px; }
            .start-button img { width: 18px; height: 18px; }
            .taskbar-clock { font-size: 10px; padding: 1px 5px; height: 20px;}
            .xp-logo-boot { width: 150px; }
            .loading-bar-container { width: 150px; height: 10px; }
            .xp-context-menu { min-width: 180px; font-size: 11px; }
            .context-menu-item { padding: 4px 18px 4px 25px; }
            #start-menu { width: 300px; height: auto; max-height: 80vh; } 
            .start-menu-item img {width: 16px; height: 16px; }
            .start-menu-item { padding: 4px 6px; font-size: 11px;}
            .start-menu-header .user-avatar { width: 32px; height: 32px;}
            .start-menu-header .user-name { font-size: 12px;}
            .start-menu-footer button { font-size: 10px; padding: 3px 6px;}
            #xp-notification { width: 180px; font-size: 10px;}
            .notification-balloon-tail { right: 15px; }
        }
        @media (max-width: 480px) { 
             .taskbar { flex-wrap: wrap; height: auto; min-height: 30px; }
             .taskbar-clock { margin-left: 0; margin-top: 2px; width: 100%; text-align: center; }
             .start-button span { display: none; } 
             .start-button { padding: 0px 5px; }
             #desktop-icons-wrapper { padding: 10px; }
             .desktop-icon { width: 75px; min-height: 70px; }
             .desktop-icon img {width: 36px; height: 36px;}
             #start-menu { width: calc(100% - 10px); left:5px; bottom:30px; height: calc(100vh - 40px); border-radius: 5px 5px 0 0; } 
             .start-menu-body { flex-direction: column; }
             .start-menu-left-panel, .start-menu-right-panel { width: 100%; border-left: none; }
             #xp-notification { width: calc(100% - 10px); right: 5px; bottom: 32px;}
        }
    </style>
</head>
<body>
    <div id="loading-screen">
        <img src="https://ruhidjavadoff.site/xp/rjxp.png" alt="Loading Logo" class="xp-logo-boot">
        <div class="loading-bar-container">
            <div class="loading-bar">
                <div class="loading-bar-segment"></div> <div class="loading-bar-segment"></div>
                <div class="loading-bar-segment"></div> <div class="loading-bar-segment"></div>
                <div class="loading-bar-segment"></div> <div class="loading-bar-segment"></div>
            </div>
        </div>
    </div>

    <div id="desktop">
        <div id="desktop-icons-wrapper">
            <div class="desktop-item-container">
                <div class="desktop-icon" id="icon-private" data-link="https://ruhidjavadoff.site/Private/">
                    <img src="https://ruhidjavadoff.site/xp/xpprivate.png" alt="Şəxsi">
                    <span>Şəxsi</span>
                </div>
                <div class="desktop-icon" id="icon-retro" data-link="https://ruhidjavadoff.site/Oyunlar/">
                    <img src="https://ruhidjavadoff.site/xp/xpgame.png" alt="Retro Oyunlar"> 
                    <span>Retro Oyunlar</span>
                </div>
                <div class="desktop-icon" id="icon-form" data-link="https://ruhidjavadoff.site/Form/">
                     <img src="https://ruhidjavadoff.site/xp/xpform.png" alt="Form"> 
                    <span>Form</span>
                </div>
                <div class="desktop-icon" id="icon-cv" data-link="https://ruhidjavadoff.site/CV/">
                     <img src="https://ruhidjavadoff.site/xp/xpcv.png" alt="Portfolyo & CV">
                    <span>Portfolyo & CV</span>
                </div>
                <div class="desktop-icon" id="icon-ai" data-link="https://ruhidjavadoff.site/ai/">
                     <img src="https://ruhidjavadoff.site/xp/xpai.png" alt="Süni intellekt">
                    <span>Süni intellekt</span>
                </div>
                <div class="desktop-icon" id="icon-store" data-link="https://ruhidjavadoff.site/link">
                     <img src="https://ruhidjavadoff.site/xp/xpstore.webp" alt="Javadovs Store">
                    <span>Javadovs Store</span>
                </div>
                <div class="desktop-icon" id="icon-myapps" data-link="https://ruhidjavadoff.site/app/">
                    <img src="https://ruhidjavadoff.site/xp/xpapp.png" alt="My Apps">
                    <span>My Apps</span> 
                </div>
                 <div class="desktop-icon" id="icon-about" data-link="https://ruhidjavadoff.site/rj">
                    <img src="https://ruhidjavadoff.site/xp/xpinfo.png" alt="Haqqımızda">
                    <span>Haqqımızda</span>
                </div>
            </div>
        </div>
    </div>

    <div class="taskbar">
        <button class="start-button" id="xp-start-button">
            <img src="https://ruhidjavadoff.site/sekiller/logorjxp.png" alt="start logo">
            <span>start</span>
        </button>
        <div class="taskbar-divider"></div>
        <div class="taskbar-divider"></div>
        <div id="system-tray-icons">
             <img src="https://ruhidjavadoff.site/xp/xpbildiris.png" alt="Bildiriş İkonu" id="notification-tray-icon">
        </div>
        <div class="taskbar-clock" id="taskbar-clock">12:00 AM</div>
    </div>

    <div id="start-menu" class="xp-start-menu">
        <div class="start-menu-header">
            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjY2NjIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEwIiByPSI0Ii8+PHBhdGggZD0iTTQuNSA5QTEwLjUgMTAuNSAwIDAgMCAxMiAxOS41QTEwLjUgMTAuNSAwIDAgMCAxOS41IDlBMTAuNSAxMC41IDAgMCAwIDEyIDQuNUE4LjUgOC41IDAgMCAwIDQuNSA5WiIvPjwvc3ZnPg==" alt="User Avatar" class="user-avatar">
            <span class="user-name">Ruhid Javadov</span>
        </div>
        <div class="start-menu-body">
            <div class="start-menu-left-panel" id="start-menu-left-content">
                </div>
            <div class="start-menu-right-panel">
                <div class="start-menu-item" data-action="open-link" data-link="https://ruhidjavadoff.site/xp/xpprivate.png"><img src="https://ruhidjavadoff.site/xp/xpprivate.png" alt=""> Şəxsi Qovluq</div>
                <div class="start-menu-item" data-action="open-link" data-link="https://ruhidjavadoff.site/app/"><img src="https://ruhidjavadoff.site/xp/xpapp.png" alt=""> Proqramlarım</div>
                <div class="start-menu-item" data-action="open-link" data-link="https://ruhidjavadoff.site/rj"><img src="https://ruhidjavadoff.site/xp/xpinfo.png" alt=""> Haqqımızda</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDVCREEiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNMTQuNSAySDkuNWEyIDIgMCAwIDAtMiAydjE2YTIgMiAwIDAgMCAyIDJoNWEyIDIgMCAwIDAgMi0ydi05bC00LTVaIi8+PHBhdGggZD0iTTQuNSAxMEg5bDMgM2gtN2EyIDIgMCAwIDEgMi0yeiIvPjxwYXRoIGQ9Im0xNC41IDJoLjAyIi8+PHBhdGggZD0iTTguMjUgMThoLjc1TTggMTVoMS41TTguMjUgMTJoMS41TTguNSA5aDEiLz48L3N2Zz4=" alt=""> My Computer</div>
                <div class="start-menu-item"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDVCREEiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNMTIuMjIgMi4wNmwxMCAxMEEyLjgzIDIuODMgMCAwIDEgMjAuOTQgMThIMTNhMSAxIDAgMCAxLTEtMXYtNUwyIDVINy4wNmEyLjgzIDIuODMgMCAwIDEgNC4wMS0xLjE3TDEyIDIuMDZabTAgMHY1Ii8+PGNpcmNsZSBjeD0iMTguNSIgY3k9IjUuNSIgcj0iMi41Ii8+PC9zdmc+" alt=""> Control Panel</div>
                <div class="start-menu-separator"></div>
                <div class="start-menu-item"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDVCREEiIHN0cm9rZS13aWR0aD0iMS41Ij48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIvPjxwYXRoIGQ9Im05LjA5IDEwLjE4IDEuODIgMi43MyAyLjEtMi43My43MyA1LjEybS01LjM4IDBIOXYtLjc4TTkgMTdoMVptMy41IDEuNWgxLjVtLS43NS00LjVoLjUiLz48L3N2Zz4=" alt=""> Help and Support</div>
                <div class="start-menu-item"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDVCREEiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEuNjUiIHkxPSIyMS42NSIgeDI9IjE2LjY1IiB5Mj0iMTYuNjUiLz48L3N2Zz4=" alt=""> Search</div>
                <div class="start-menu-item"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDVCREEiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNCA0aDEwbDcgN3Y5YTEgMSAwIDAgMS0xIDFoLTE0YTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xWm04IDBsMCA1aDVNMTAgMTRoNE0xMCAxN2g0Ii8+PC9zdmc+" alt=""> Run...</div>
            </div>
        </div>
        <div class="start-menu-footer">
            <button id="log-off-button"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNOC41IDE2LjVMMTIgMTNsMy41IDMuNU0xMiAzaDdhMiAyIDAgMCAxIDIgMnYxNGExIDIgMCAwIDEgLTIgMkg1YTIgMiAwIDAgMS0yLTJWMWEyIDIgMCAwIDEgMSA0bDIgMiIvPjwvc3ZnPg==" alt="">Log Off</button>
            <button id="turn-off-button"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMTIuODkgMi4xMWwtMS40NCAxLjQ0QzYuMjYgNi4xOSAyIDEwLjU5IDIgMTZjMCAuNjkuMSAxLjM2LjI0IDIuMDFBMTAuNSA1LjUgMCAwIDEgMTEgMTguMDdWMTFoMmMwIDQuNDIgMi44OSA4LjE4IDYuODEgOS40OWEuNS41IDAgMCAwIC42OS0uNDhWMy41YS41LjUgMCAwIDAtLjYxLS40OUwxNS41IDIuMjVhLjUuNSAwIDAgMC0uNzkuMjRsLTEgMW0tNC4xMSA0LjA1QzguNTUgNy4zOCA3IDguNSA3IDkuNzVjMCAuMi4wMi40LjA2LjU5bDItMnptNi42Ni42NmMyLjM0LjI0IDQuMjQtMS4yNiA0LjUtMy41TTggMTZjMCAuODMuNDEgMS41IDEgMnoiLz48L3N2Zz4=" alt="">Turn Off Computer</button>
        </div>
    </div>

     <div id="xp-notification">
        <div class="notification-title-bar">
            <span id="notification-title">Bildiriş</span>
            <button class="close-notification" id="close-xp-notification">r</button>
        </div>
        <div class="notification-content">
            <img src="https://ruhidjavadoff.site/xp/xpbildiris.png" alt="Notification Icon" id="notification-icon-img">
            <span id="notification-text">Sistem yükləndi və hazır vəziyyətdədir!</span>
        </div>
        <div class="notification-balloon-tail"></div>
    </div>

    <div id="context-menu" class="xp-context-menu">
        <div class="context-menu-item has-submenu" id="ctx-screen-sizes">Ekran Ölçüləri</div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" id="ctx-lock-items">İkonların yerini kilidlə</div>
    </div>
    <div id="screen-size-submenu" class="xp-context-menu xp-submenu">
        <div class="context-menu-item" data-zoom="0.5">50%</div>
        <div class="context-menu-item" data-zoom="0.75">75%</div>
        <div class="context-menu-item" data-zoom="1">100% (Standart)</div>
        <div class="context-menu-item" data-zoom="1.25">125%</div>
        <div class="context-menu-item" data-zoom="1.5">150%</div>
        <div class="context-menu-item" data-zoom="2">200%</div>
        <div class="context-menu-item" data-zoom="3">300%</div>
    </div>
    <script>
        const loadingScreen = document.getElementById('loading-screen');
        const desktop = document.getElementById('desktop');
        const desktopIconsWrapper = document.getElementById('desktop-icons-wrapper');
        const contextMenu = document.getElementById('context-menu');
        const screenSizeSubmenu = document.getElementById('screen-size-submenu');
        const ctxScreenSizes = document.getElementById('ctx-screen-sizes');
        const ctxLockItems = document.getElementById('ctx-lock-items');
        const startButton = document.getElementById('xp-start-button');
        const startMenu = document.getElementById('start-menu');
        const startMenuLeftContent = document.getElementById('start-menu-left-content');
        const xpNotification = document.getElementById('xp-notification');
        const closeXpNotification = document.getElementById('close-xp-notification');
        const notificationText = document.getElementById('notification-text'); 

        let currentZoomLevel = parseFloat(localStorage.getItem('xpDesktopZoom_v4')) || 1;
        let itemsLocked = localStorage.getItem('xpDesktopLocked_v4') === 'true';
        let longPressTimer;
        const LONG_PRESS_DURATION = 500;
        let activeDragItem = null;
        let offsetXForDrag, offsetYForDrag; 

        window.addEventListener('load', () => {
            setTimeout(() => {
                if (loadingScreen) loadingScreen.classList.add('hidden');
                setTimeout(showXpNotification, 1000); 
            }, 3500);
            applyZoom(currentZoomLevel, false); 
            updateLockItemVisual();
            positionIconsInitially();
            populateStartMenu();
        });

        function updateClock() { 
            const clockEl = document.getElementById('taskbar-clock');
            if (!clockEl) return;
            const now = new Date(); let hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12; hours = hours ? hours : 12;
            clockEl.textContent = `${hours}:${minutes} ${ampm}`;
        }
        setInterval(updateClock, 1000); updateClock();
        
        function showXpNotification(message = "Sistem yükləndi və hazır vəziyyətdədir!", title = "Bildiriş") {
            if (!xpNotification) return;
            if(notificationText) notificationText.textContent = message;
            const notificationTitleEl = xpNotification.querySelector('#notification-title');
            if(notificationTitleEl) notificationTitleEl.textContent = title;
            xpNotification.classList.add('visible');
            setTimeout(() => { hideXpNotification(); }, 7000);
        }
        function hideXpNotification() {
            if (xpNotification) xpNotification.classList.remove('visible');
        }
        if(closeXpNotification) {
            closeXpNotification.addEventListener('click', hideXpNotification);
        }

        function showContextMenu(x, y) { 
            if (!contextMenu) return;
            hideSubmenu();
            hideStartMenu(); 
            const menuWidth = contextMenu.offsetWidth; const menuHeight = contextMenu.offsetHeight;
            const screenWidth = window.innerWidth; const screenHeight = window.innerHeight;
            if (x + menuWidth > screenWidth) x = screenWidth - menuWidth - 5;
            if (y + menuHeight > screenHeight) y = screenHeight - menuHeight - 5;
            if (x < 0) x = 5; if (y < 0) y = 5;
            contextMenu.style.left = x + 'px'; contextMenu.style.top = y + 'px';
            contextMenu.style.display = 'block';
        }
        function hideContextMenu() { if(contextMenu) contextMenu.style.display = 'none'; hideSubmenu(); }
        function showSubmenu() { 
            if (!screenSizeSubmenu || !ctxScreenSizes || !contextMenu) return;
            const parentRect = ctxScreenSizes.getBoundingClientRect(); const menuRect = contextMenu.getBoundingClientRect();
            let left = menuRect.right - 5;
            if (left + screenSizeSubmenu.offsetWidth > window.innerWidth) left = menuRect.left - screenSizeSubmenu.offsetWidth + 5;
            if (left < 0) left = menuRect.left + 5; 
            screenSizeSubmenu.style.left = left + 'px';
            screenSizeSubmenu.style.top = parentRect.top + 'px';
            screenSizeSubmenu.style.display = 'block';
        }
        function hideSubmenu() { if(screenSizeSubmenu) screenSizeSubmenu.style.display = 'none'; }
        
        if(desktop) {
            desktop.addEventListener('contextmenu', (e) => { e.preventDefault(); showContextMenu(e.clientX, e.clientY); });
            let touchStartX, touchStartY;
            desktop.addEventListener('touchstart', (e) => {
                if ((contextMenu && contextMenu.contains(e.target)) || (screenSizeSubmenu && screenSizeSubmenu.contains(e.target)) || 
                    (startMenu && startMenu.contains(e.target)) || 
                    e.target.classList.contains('desktop-icon') || e.target.closest('.desktop-icon') ||
                    e.target === startButton || (startButton && startButton.contains(e.target))) { 
                    clearTimeout(longPressTimer); return;
                }
                touchStartX = e.touches[0].clientX; touchStartY = e.touches[0].clientY;
                longPressTimer = setTimeout(() => { showContextMenu(touchStartX, touchStartY); }, LONG_PRESS_DURATION);
            });
            desktop.addEventListener('touchmove', (e) => {
                if (longPressTimer) { 
                    const deltaX = Math.abs(e.touches[0].clientX - touchStartX);
                    const deltaY = Math.abs(e.touches[0].clientY - touchStartY);
                    if (deltaX > 10 || deltaY > 10) clearTimeout(longPressTimer);
                }
            });
            desktop.addEventListener('touchend', () => { clearTimeout(longPressTimer); });
        }
        
        document.addEventListener('click', (e) => {
            let clickedOnContextMenu = contextMenu && (contextMenu.contains(e.target) || (screenSizeSubmenu && screenSizeSubmenu.contains(e.target)));
            let clickedOnStartMenu = startMenu && startMenu.contains(e.target);
            let clickedOnStartButton = startButton && (e.target === startButton || startButton.contains(e.target));
            let clickedOnIcon = e.target.classList.contains('desktop-icon') || e.target.closest('.desktop-icon');

            if (!clickedOnContextMenu && !clickedOnStartMenu && !clickedOnStartButton && !clickedOnIcon) {
                deselectAllIcons(); 
            }
            if (!clickedOnContextMenu && !clickedOnStartMenu && !clickedOnStartButton) {
                 hideContextMenu();
            }
            if (!clickedOnStartMenu && !clickedOnStartButton) {
                hideStartMenu();
            }
        });
        document.addEventListener('keydown', (e) => { 
            if (e.key === 'Escape') {
                hideContextMenu();
                hideStartMenu();
            }
        });
        
        if (ctxScreenSizes) {
            ctxScreenSizes.addEventListener('mouseenter', () => { if (window.innerWidth > 768) showSubmenu(); });
            ctxScreenSizes.addEventListener('click', (e) => {
                e.stopPropagation(); 
                if (screenSizeSubmenu) screenSizeSubmenu.style.display === 'block' ? hideSubmenu() : showSubmenu();
            });
        }
        
        function applyZoom(zoomValue, save = true) {
            if (!desktopIconsWrapper || !screenSizeSubmenu) return;
            currentZoomLevel = zoomValue;
            desktopIconsWrapper.style.transform = `scale(${currentZoomLevel})`;
            if (save) localStorage.setItem('xpDesktopZoom_v4', currentZoomLevel);
            screenSizeSubmenu.querySelectorAll('.context-menu-item').forEach(item => {
                item.classList.remove('selected');
                if (parseFloat(item.dataset.zoom) === currentZoomLevel) item.classList.add('selected');
            });
        }
        if (screenSizeSubmenu) {
            screenSizeSubmenu.querySelectorAll('.context-menu-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.stopPropagation(); applyZoom(parseFloat(item.dataset.zoom)); hideContextMenu();
                });
            });
        }

        function updateLockItemVisual() { 
            if(ctxLockItems) ctxLockItems.classList.toggle('checked', itemsLocked); 
        }
        if (ctxLockItems) {
            ctxLockItems.addEventListener('click', (e) => {
                e.stopPropagation(); itemsLocked = !itemsLocked;
                localStorage.setItem('xpDesktopLocked_v4', itemsLocked);
                updateLockItemVisual(); hideContextMenu();
            });
        }
        
        function showStartMenu() {
            if (!startMenu || !startButton) return;
            hideContextMenu(); 
            startMenu.classList.add('visible');
            startButton.classList.add('active');
        }
        function hideStartMenu() {
            if (!startMenu || !startButton) return;
            startMenu.classList.remove('visible');
            startButton.classList.remove('active');
        }
        function toggleStartMenu() {
            if (!startMenu) return;
            startMenu.classList.contains('visible') ? hideStartMenu() : showStartMenu();
        }
        if (startButton) {
            startButton.addEventListener('click', (e) => {
                e.stopPropagation(); toggleStartMenu();
            });
        }
        
        function populateStartMenu() {
            if (!startMenuLeftContent) return;
            startMenuLeftContent.innerHTML = ''; 
            const menuItems = [
                { text: "Nümunə 1", icon: "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDVCREEiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNCA0aDEwbDcgN3Y5YTEgMSAwIDAgMS0xIDFoLTE0YTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xWm04IDBsMCA1aDVNMTAgMTRoNE0xMCAxN2g0Ii8+PC9zdmc+" },
                { text: "Nümunə 2", icon: "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDVCREEiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNCA0aDEwbDcgN3Y5YTEgMSAwIDAgMS0xIDFoLTE0YTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xWm04IDBsMCA1aDVNMTAgMTRoNE0xMCAxN2g0Ii8+PC9zdmc+" }
            ];
            menuItems.forEach(data => {
                const itemDiv = document.createElement('div'); itemDiv.classList.add('start-menu-item');
                const img = document.createElement('img'); img.src = data.icon; img.alt = '';
                const span = document.createElement('span'); span.textContent = data.text;
                itemDiv.appendChild(img); itemDiv.appendChild(span);
                startMenuLeftContent.appendChild(itemDiv);
            });
            const separator = document.createElement('div'); separator.classList.add('start-menu-separator');
            startMenuLeftContent.appendChild(separator);
            const allPrograms = document.createElement('div');
            allPrograms.classList.add('start-menu-item', 'all-programs');
            allPrograms.innerHTML = `Bütün Proqramlar <span class="submenu-arrow">&gt;</span>`;
            startMenuLeftContent.appendChild(allPrograms);
        }

        const icons = Array.from(document.querySelectorAll('.desktop-icon'));
        const iconGrid = {
            cols: 0,
            colWidth: 115, 
            rowHeight: 115 
        };
        if (icons.length > 0 && icons[0].offsetParent !== null) { 
            iconGrid.colWidth = icons[0].offsetWidth + 15; 
            iconGrid.rowHeight = icons[0].offsetHeight + 15; 
        }

        let lastClickTimestamp = 0;
        let lastClickedIconEl = null;
        const DOUBLE_CLICK_THRESHOLD = 400;

        function getSavedPositions() {
            const saved = localStorage.getItem('xpIconPositionsV3');
            return saved ? JSON.parse(saved) : {};
        }
        function saveIconPosition(id, left, top) {
            const positions = getSavedPositions();
            positions[id] = { left, top };
            localStorage.setItem('xpIconPositionsV3', JSON.stringify(positions));
        }
        function deselectAllIcons() {
            icons.forEach(icon => icon.classList.remove('selected'));
        }

        function positionIconsInitially() {
            if (!desktopIconsWrapper || icons.length === 0) return;
            // Make sure iconGrid dimensions are calculated based on a rendered icon
            if (icons[0].offsetParent !== null && iconGrid.colWidth === 115) { // Re-calculate if defaults were used
                 iconGrid.colWidth = icons[0].offsetWidth + 15;
                 iconGrid.rowHeight = icons[0].offsetHeight + 15;
            }

            const savedPositions = getSavedPositions();
            const containerPadding = parseFloat(window.getComputedStyle(desktopIconsWrapper).paddingLeft) || 20;
            const availableWidth = desktopIconsWrapper.clientWidth - containerPadding;
            iconGrid.cols = Math.max(1, Math.floor(availableWidth / iconGrid.colWidth));

            let currentTop = 0;
            let currentLeft = 0;
            let countInRow = 0;
            const aboutIcon = document.getElementById('icon-about');

            icons.forEach((icon, index) => {
                icon.style.position = 'absolute';
                if (!icon.id) icon.id = 'icon-default-' + index;

                if (savedPositions[icon.id] && savedPositions[icon.id].left !== undefined && savedPositions[icon.id].top !== undefined) {
                    icon.style.left = savedPositions[icon.id].left;
                    icon.style.top = savedPositions[icon.id].top;
                } else {
                    if (icon === aboutIcon) {
                        const iconActualWidth = icon.offsetWidth || (iconGrid.colWidth - 15);
                        const iconActualHeight = icon.offsetHeight || (iconGrid.rowHeight - 15);
                        icon.style.left = Math.max(0, desktopIconsWrapper.clientWidth - iconActualWidth - containerPadding - 5) + 'px';
                        icon.style.top = Math.max(0, desktopIconsWrapper.clientHeight - iconActualHeight - containerPadding - 5) + 'px';
                    } else {
                        if (countInRow >= iconGrid.cols) {
                            currentLeft = 0;
                            currentTop += iconGrid.rowHeight;
                            countInRow = 0;
                        }
                        icon.style.left = currentLeft + 'px';
                        icon.style.top = currentTop + 'px';
                        currentLeft += iconGrid.colWidth;
                        countInRow++;
                    }
                    saveIconPosition(icon.id, icon.style.left, icon.style.top);
                }

                let lastTapTime = 0;
                icon.addEventListener('click', (e) => {
                    e.preventDefault();
                    const currentTime = new Date().getTime();
                    if (lastClickedIconEl !== icon) {
                        deselectAllIcons();
                        icon.classList.add('selected');
                        lastClickTimestamp = currentTime;
                        lastClickedIconEl = icon;
                    } else {
                        if ((currentTime - lastClickTimestamp) < DOUBLE_CLICK_THRESHOLD) {
                            deselectAllIcons();
                            lastClickTimestamp = 0;
                            lastClickedIconEl = null;
                            const link = icon.dataset.link;
                            if (link) window.open(link, '_blank');
                        } else {
                            lastClickTimestamp = currentTime;
                        }
                    }
                });
                icon.addEventListener('touchstart', (e) => {
                    const currentTime = new Date().getTime();
                    if (lastClickedIconEl === icon && (currentTime - lastTapTime) < DOUBLE_CLICK_THRESHOLD) {
                        e.preventDefault();
                        deselectAllIcons();
                        lastTapTime = 0;
                        lastClickedIconEl = null;
                        const link = icon.dataset.link;
                        if (link) window.open(link, '_blank');
                    } else {
                        deselectAllIcons();
                        icon.classList.add('selected');
                        lastTapTime = currentTime;
                        lastClickedIconEl = icon;
                    }
                }, { passive: false });

                icon.addEventListener('mousedown', dragStart);
                icon.addEventListener('touchstart', dragStart, { passive: false });
            });
        }

        function dragStart(e) {
            if (itemsLocked || (e.type === 'mousedown' && e.button !== 0)) return;
            activeDragItem = this;
            deselectAllIcons();
            activeDragItem.classList.add('selected');
            const rect = activeDragItem.getBoundingClientRect();

            if (e.type === 'touchstart') {
                offsetXForDrag = e.touches[0].clientX - rect.left;
                offsetYForDrag = e.touches[0].clientY - rect.top;
                document.addEventListener('touchmove', dragging, { passive: false });
                document.addEventListener('touchend', dragEnd);
            } else {
                offsetXForDrag = e.clientX - rect.left;
                offsetYForDrag = e.clientY - rect.top;
                document.addEventListener('mousemove', dragging);
                document.addEventListener('mouseup', dragEnd);
            }
            activeDragItem.classList.add('dragging');
        }

        function dragging(e) {
            if (!activeDragItem || itemsLocked) return;
            e.preventDefault();
            let eventX, eventY;
            if (e.type === 'touchmove') { eventX = e.touches[0].clientX; eventY = e.touches[0].clientY; }
            else { eventX = e.clientX; eventY = e.clientY; }

            const wrapperRect = desktopIconsWrapper.getBoundingClientRect();
            let newLeftNonScaled = (eventX - wrapperRect.left - offsetXForDrag + desktopIconsWrapper.scrollLeft) / currentZoomLevel;
            let newTopNonScaled = (eventY - wrapperRect.top - offsetYForDrag + desktopIconsWrapper.scrollTop) / currentZoomLevel;

            const iconWidth = activeDragItem.offsetWidth; const iconHeight = activeDragItem.offsetHeight;
            const maxLeft = (desktopIconsWrapper.scrollWidth / currentZoomLevel) - iconWidth;
            const maxTop = (desktopIconsWrapper.scrollHeight / currentZoomLevel) - iconHeight;
            newLeftNonScaled = Math.max(0, Math.min(newLeftNonScaled, maxLeft));
            newTopNonScaled = Math.max(0, Math.min(newTopNonScaled, maxTop));
            activeDragItem.style.left = newLeftNonScaled + 'px';
            activeDragItem.style.top = newTopNonScaled + 'px';
        }

        function dragEnd() {
            if (!activeDragItem) return;
            activeDragItem.classList.remove('dragging');
            saveIconPosition(activeDragItem.id, activeDragItem.style.left, activeDragItem.style.top);
            activeDragItem = null;
            document.removeEventListener('mousemove', dragging);
            document.removeEventListener('mouseup', dragEnd);
            document.removeEventListener('touchmove', dragging);
            document.removeEventListener('touchend', dragEnd);
        }
    </script>
</body>
</html>
